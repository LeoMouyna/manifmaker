<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: client/routes/route-common.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: client/routes/route-common.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @namespace Route
 */

Router.configure({
    layoutTemplate: 'wrapper'
});

//hide menu for each new route
Router.onAfterAction(function () {
    $('#button-collapse-left-menu').sideNav('hide');
});


//hide topNavBar to each expect assignment
Router.onAfterAction(function () {
        this.render("", {to: "topNavBar"});

        assignmentCalendarIsRendered = false;
    },
    {
        except: [
            'assignment.calendar',
            'assignment.calendar.user',
            'assignment.calendar.userToTask',
            'assignment.calendar.userToTask.user',
            'assignment.calendar.userToTask.user.date',

            'assignment.calendar.taskToUser',
            'assignment.calendar.taskToUser.task',
            'assignment.calendar.taskToUser.task.timeSlot',

            'assignment.calendar.task.search'

        ]
    }
);

/**
 * @memberOf Route
 * @namespace Route.common
 */

/**
 * @memberOf Route.common
 * @summary Demo du custom select
 * @locus client
 * @name 'demo-select'  /demo-select
 */
Router.route('/demo-select', function () {
        this.wait(Meteor.subscribe('users'));
        this.wait(Meteor.subscribe('tasks'));
        this.wait(Meteor.subscribe('teams'));
        this.wait(Meteor.subscribe('skills'));
        this.wait(Meteor.subscribe('power-supplies'));

        if (this.ready()) {
            this.render('demo-select', {to: 'mainContent',
            data:{
                user1Id : Users.findOne({name:"user1"})._id,
                user2Id : Users.findOne({name:"user2"})._id,
                task2Id : Tasks.findOne({name:"task 2"})._id,
                team1Id : Teams.findOne({name:"team1"})._id,
                team1Idteam2Id: [Teams.findOne({name:"team1"})._id, Teams.findOne({name:"team2"})._id],
                skill1Idskill2Id: [Skills.findOne({"label" : "Responsable tache 1"})._id, Skills.findOne({"label" : "Responsable tache 2"})._id],
                powersupply1 : PowerSupplies.findOne({name:"powerSupply1"})._id
            }});
        } else {
            console.log("Route / : waiting users_custom data"); //TODO add a spinner
        }


    },
    {name: 'demo-select'}
);

/**
 * @memberOf Route.common
 * @summary Inject Dada (remove all before)
 * @locus client
 * @name 'inject-data'  /inject-data
 */
Router.route('/inject-data', function () {
        if (Meteor.isDevelopment) {
            Accounts.logout();
            $("#result").html("please wait while injecting data, you are now logged out");
            Meteor.call("injectData",function(error, result){
                if(error){
                    $("#result").html(error);
                } else {
                    $("#result").html("inject happened without error, please log in");
                }
            })
        } else {
            console.error("/inject-data is a dev only route")
        }
    },
    {name: 'inject-data'}
)

/**
 * @memberOf Route.common
 * @summary Delete all DB data
 * @locus client
 * @name 'home'  /delete-all
 */
Router.route('/delete-all', function () {
        if (Meteor.isDevelopment) {
            Accounts.logout();
            $("#result").html("please wait while deleting data, you are now logged out");
            Meteor.call("deleteAll",function(error, result){
                if(error){
                    $("#result").html(error);
                } else {
                    $("#result").html("deleteAll happened without error, you should use /init-access-right-data to be able to log in");
                }
            })
        } else {
            console.error("/delete-all is a dev only route")
        }
    },
    {name: 'delete-all'}
)


/**
 * @memberOf Route.common
 * @summary Inject some authent profil (admin/admin and others)
 * @locus client
 * @name 'init-access-right-data'  /init-access-right-data
 */
Router.route('/init-access-right-data', function () {
        if (Meteor.isDevelopment) {
            Accounts.logout();
            $("#result").html("please wait while injecting data, you are now logged out");
            Meteor.call("initAccessRightData",function(error, result){
                if(error){
                    $("#result").html(error);
                } else {
                    $("#result").html("initAccessRightData happened without error, please log in");
                }
            })
        } else {
            console.error("/init-access-right-dat is a dev only route")
        }
    },
    {name: 'init-access-right-data'}
)

/**
 * @memberOf Route.common
 * @summary Add some data test (some conf, 3 tasks)
 * @locus client
 * @name 'populate-data'  /populate-data
 */
Router.route('/populate-data', function () {
        if (Meteor.isDevelopment) {
            Accounts.logout();
            $("#result").html("please wait while injecting data, you are now logged out");
            Meteor.call("populateData",function(error, result){
                if(error){
                    $("#result").html(error);
                } else {
                    $("#result").html("populateData happened without error, please log in");
                }
            })
        } else {
            console.error("/populate-data is a dev only route")
        }
    },
    {name: 'populate-data'}
)


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="-_.html"></a></li><li><a href="AssignmentServiceClient.html">AssignmentServiceClient</a></li><li><a href="InjectDataServerService.html">InjectDataServerService</a></li><li><a href="Leaf.html">Leaf</a></li><li><a href="SecurityServiceClient.html">SecurityServiceClient</a></li><li><a href="SecurityServiceServer.html">SecurityServiceServer</a></li><li><a href="ServerAssignmentService.html">ServerAssignmentService</a></li><li><a href="ServerReferenceCollectionsService.html">ServerReferenceCollectionsService</a></li><li><a href="ServerTaskService.html">ServerTaskService</a></li><li><a href="ServerUserService.html">ServerUserService</a></li></ul><h3>Namespaces</h3><ul><li><a href="Collection.html">Collection</a></li><li><a href="EasySearch.html">EasySearch</a></li><li><a href="Enum.html">Enum</a></li><li><a href="Meteor%2520Methods.html">Meteor Methods</a></li><li><a href="Meteor_Publish.html">Meteor_Publish</a></li><li><a href="Route.html">Route</a></li><li><a href="Route.Assignment.html">Assignment</a></li><li><a href="Route.Assignment.taskToUser.html">taskToUser</a></li><li><a href="Route.Assignment.userToTask.html">userToTask</a></li><li><a href="Route.collectionReference.html">collectionReference</a></li><li><a href="Route.common.html">common</a></li><li><a href="Route.Task.html">Task</a></li><li><a href="Route.User.html">User</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Jun 20 2016 16:36:23 GMT+0200 (Paris, Madrid (heure d’été))
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
